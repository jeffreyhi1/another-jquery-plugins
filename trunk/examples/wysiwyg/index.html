<!DOCTYPE html>

<!-- $Id$ -->

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="-1"/>

<link href="../../css/basics.css" rel="stylesheet" type="text/css"/>
<link href="../../css/960c12.css" rel="stylesheet" type="text/css"/>
<link href="../../css/style.css" rel="stylesheet" type="text/css"/>

<script type="text/javascript" charset="utf-8" src="../../jquery/1.6.2.js"></script> 

<title>wysiwyg - example</title>

<link href="../../source/css/release/jquery.ajp.css" rel="stylesheet" type="text/css"/>
<link href="../../source/css/release/theme/jquery.ajp.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" charset="utf-8" src="../../source/release/jquery.ajp.js"></script> 

<style>

body { margin: 1em; }

#ex1 {
	background: #fff;
	border: 1px dashed #ccc;
	width: 660px;
	height: 200px;
	overflow: auto;
	padding: 6px;
	margin-bottom: 1em;
	z-index: 1;
}

.toolbar {
	background: #eee;
	width: 674px;
	visibility: hidden;
}

.toolbar button, .toolbar .button {
	min-width: 3em;
	border: 0;
	float: left;
	margin: 0;
	opacity: 0.6;
	filter: alpha(opacity=60);
}

.toolbar button:hover, .toolbar .button:hover {
	opacity: 1;
	filter: alpha(opacity=100);
}

.toolbar button:active {
	background: #ccc;
}

.toolbar .bold { font-weight: bold; }
.toolbar .italic { font-style: italic; }
.toolbar .underline { text-decoration: underline; }
.toolbar .strike { text-decoration: line-through; }

.toolbar .button {
	padding: 0.07em 0.6em;
	min-width: 0;
}

.foreground-colorpicker, .background-colorpicker {
	width: 2em;
	line-height: 2.2em;
}

.foreground-colorpicker > .letter {
	font-weight: bold;
	border-bottom: 2px solid red;
	margin-right: 0.4em;
}

.background-colorpicker > .letter {
	background-color: red;
	color: white;
	font-weight: bold;
	margin-right: 0.4em;
	padding: 4px;
	margin-left: -4px;
	position: relative;
	top: 0.2em;
}

.ajp-colorpicker {
	position: relative;
	z-index: 5;	
}

</style>

<script>

$(document).ready(function () {

	$('.toolbar .btn').each(function () {
		var $btn = $(this)
		var cmd = $btn.data('cmd')
		$btn.addClass(cmd).click(function () {
			var ctx = $('#ex1').ajp$editableContext()
			ctx.execCommand(cmd)
		})
	})

	$('.toolbar .foreground-colorpicker').ajp$colorpicker({
		onchange: function (val) {
			var ctx = $('#ex1').ajp$editableContext()
			ctx.replaceSelection('<span style="color: ' + val + '">' + ctx.getSelectedHtml() + '</span>')
		}
	})

	$('.toolbar .background-colorpicker').ajp$colorpicker({
		onchange: function (val) {
			var ctx = $('#ex1').ajp$editableContext()
			ctx.replaceSelection('<span style="background-color: ' + val + '">' + ctx.getSelectedHtml() + '</span>')
		}
	})

	$('.make-editable').click(function () {
		$('#ex1').ajp$editable()
		$('.toolbar').css({ visibility: 'visible', opacity: 0 }).animate({ opacity: 1 }, 'fast', 'swing')
	})

	$('.make-uneditable').click(function () {
		$('#ex1').ajp$uneditable()
		$('.toolbar').animate({ opacity: 0 }, 'fast', 'swing', function () { $(this).css({ visibility: 'visible', opacity: 0 }) })
	})

	$('.make-editable').click()
})

</script>

</head>

<body>

	<div class="toolbar">
		<button class="btn" data-cmd="bold">B</button>
		<button class="btn" data-cmd="italic">I</button>
		<button class="btn" data-cmd="underline">U</button>
		<button class="btn" data-cmd="strike">S</button>
		<button class="foreground-colorpicker"><span class="letter">A</span><span>&#x25BE;</span></button>
		<button class="background-colorpicker"><span class="letter">B</span><span>&#x25BE;</span></button>
		<button class="btn" data-cmd="h1">H1</button>
		<button class="btn" data-cmd="h2">H2</button>
		<button class="btn" data-cmd="h3">H3</button>
		<button class="btn" data-cmd="h4">H4</button>
		<button class="btn" data-cmd="h5">H5</button>
		<button class="btn" data-cmd="h6">H6</button>
		<button class="btn" data-cmd="anchor">link</button>
		<button class="btn" data-cmd="text">clear</button>
		<div class="clear"></div>
	</div>

	<div id="ex1">
		This is editable area. You can use Ctrl+b, Ctrl+i, Ctrl+u, Ctrl+s, Ctrl+r, Ctrl+l, Ctrl+[1-6] shortcuts.
	</div>

	<button class="make-editable">Make editable</button>
	<button class="make-uneditable">Make uneditable</button>

</body>